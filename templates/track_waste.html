{% extends "base.html" %}

{% block title %}Track Waste - Ecotrack{% endblock %}

{% block content %}
<div class="container">
    <h1 class="page-title">Track Your Waste</h1>
    
    <div class="waste-tracking-container">
        <div class="tracking-form-card">
            <h2>Add New Waste Entry</h2>
            <form method="POST" action="{{ url_for('track_waste') }}">
                <div class="form-group">
                    <label for="waste_type">Waste Type</label>
                    <select id="waste_type" name="waste_type" required>
                        <option value="">Select waste type</option>
                        <option value="organic">Organic</option>
                        <option value="recyclable">Recyclable</option>
                        <option value="hazardous">Hazardous</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="weight_kg">Weight (kg)</label>
                    <input type="number" id="weight_kg" name="weight_kg" step="0.1" min="0" placeholder="e.g., 2.5">
                </div>
                <div class="form-group">
                    <label for="description">Description (Optional)</label>
                    <textarea id="description" name="description" rows="3" placeholder="Additional details about the waste..."></textarea>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="recycled" name="recycled" value="1">
                        <span>This waste was recycled ♻️</span>
                    </label>
                    <small style="display: block; margin-top: 0.5rem; color: var(--text-light);">
                        Check this if you recycled this waste item
                    </small>
                </div>
                <button type="submit" class="btn btn-primary btn-block">Add Entry</button>
            </form>
        </div>

        <div class="entries-list-card">
            <h2>Your Waste Entries</h2>
            {% if entries %}
                <div class="entries-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Type</th>
                                <th>Weight (kg)</th>
                                <th>Description</th>
                                <th>Recycled</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for entry in entries %}
                            <tr>
                                <td>{{ entry.disposal_date.strftime('%Y-%m-%d') }}</td>
                                <td><span class="badge badge-{{ entry.waste_type }}">{{ entry.waste_type|title }}</span></td>
                                <td>{{ entry.weight_kg or 'N/A' }}</td>
                                <td>{{ entry.description or '-' }}</td>
                                <td>
                                    {% if entry.recycled %}
                                        <span style="color: var(--success-color); font-weight: 600;">✓ Yes</span>
                                    {% else %}
                                        <span style="color: var(--text-light);">✗ No</span>
                                    {% endif %}
                                </td>
                                <td>
                                    <form method="POST" action="{{ url_for('toggle_recycled', entry_id=entry.id) }}" style="display: inline;">
                                        <button type="submit" class="btn btn-sm" style="padding: 0.3rem 0.8rem; font-size: 0.85rem;">
                                            {% if entry.recycled %}
                                                Mark as Not Recycled
                                            {% else %}
                                                Mark as Recycled
                                            {% endif %}
                                        </button>
                                    </form>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <p class="empty-state">No waste entries yet. Start tracking your waste disposal!</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

